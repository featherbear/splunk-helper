define(["jquery","splunkjs/mvc"],(e,n)=>({updateSearch:e=>new Promise((o,t)=>{let a=n.Components.getInstance(e);a||t(),a.cancel&&a.cancel(),a.startSearch().once("search:done",o)}),doSearch:e=>new Promise((o,t)=>n.Components.getInstance(e).data("results").once("data",(function(e,n){o(n)}))),attachSearch:e=>new Promise((o,t)=>{n.Components.getInstance(e).once("search:done",(function(){console.log("Search done",arguments),this.data("results").once("data",(function(n,t){1!==t.rows.length&&console.warn(e+" returned more than one row"),o(t)}))}))})}));